# Практика 9 — Тестирование легаси-кода и безопасный рефакторинг

## Выполнено:
- 10 юнит-тестов с Moq и FluentAssertions
- Полное покрытие всех веток исходного кода
- Сохранён исходный легаси-код в папке /Legacy
- Проведён рефакторинг с сохранением 100% поведения
- Все тесты проходят и на старой, и на новой версии

## Обнаруженные проблемы в легаси-коде:
- Нет проверки зависимостей на null
- Подключение к БД внутри основного метода
- Отправка email внутри общего try-catch → ошибка письма ломает весь процесс? Нет, не ломает — но код неочевиден
- Попытка Save() даже при падении Connect()
- Нет разделения ответственности

## Как рефакторинг решил проблемы:
- Выделены приватные методы
- Проверки на null в конструкторе
- Читаемость ×10
- Расширяемость (легко добавить логирование, транзакции и т.д.)

Все тесты зелёные: dotnet test → 10 Passed
